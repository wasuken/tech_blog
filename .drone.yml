kind: pipeline
type: kubernetes
name: hugo-pipeline

steps:
- name: build-hugo
  image: klakegg/hugo:latest
  volumes:
  - name: hugo-pv
    path: /output
  commands:
  - cd posts
  - hugo
  - rm -rf /output/*
  - cp -r public/* /output/
  - ls -la /output/

volumes:
- name: hugo-pv
  claim:
    name: hugo-static-pvc
